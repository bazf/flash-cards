<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Флеш-картки за системою Лейтнера — навчання з інтервальним повторенням">
    <meta name="theme-color" content="#00d1b2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Флеш-картки">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="icon" type="image/png" href="icons/icon-192.png" sizes="192x192">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css">
    <title>Флеш-картки — Система Лейтнера</title>
</head>

<body>
    <nav class="navbar is-white is-fixed-top has-shadow">
        <div class="container">
            <div class="navbar-brand">
                <a class="navbar-item has-text-weight-semibold" href="#" id="homeBrand">
                    <svg class="brand-icon" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <rect x="2" y="4" width="20" height="16" rx="2" fill="#00d1b2" />
                        <rect x="4" y="6" width="16" height="12" rx="1" fill="white" />
                        <path d="M8 10h8M8 14h5" stroke="#00d1b2" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    Флеш-картки
                </a>
            </div>
            <div class="navbar-end">
                <div class="navbar-item">
                    <button id="updateBtn" class="button is-warning is-small is-hidden">Доступне оновлення</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="section" style="padding-top: 5rem;">
        <div class="container">
            <!-- Deck Selection View -->
            <section id="deckSelectionView" class="view is-hidden">
                <div class="level is-mobile mb-4">
                    <div class="level-left">
                        <div class="level-item">
                            <div>
                                <h1 class="title is-4 mb-1">Колоди</h1>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="defaultDecksContainer" class="box mb-4">
                    <h2 class="title is-6 mb-4">Стандартні колоди</h2>
                    <div id="defaultDecksList" class="columns is-multiline"></div>
                </div>

                <div id="uploadSection" class="box mb-4">
                    <h2 class="title is-6 mb-3">Завантажити CSV</h2>
                    <div class="file is-primary is-boxed is-centered">
                        <label class="file-label">
                            <input class="file-input" type="file" id="csvFileInput" accept=".csv">
                            <span class="file-cta">
                                <span class="file-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 4v12m0-12L8 8m4-4l4 4" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2" stroke="currentColor"
                                            stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                </span>
                                <span class="file-label">Обрати CSV файл…</span>
                            </span>
                        </label>
                    </div>
                    <p class="help has-text-centered">2 колонки: питання, відповідь. UTF-8.</p>
                </div>

                <div id="userDecksContainer" class="box is-hidden">
                    <h2 class="title is-6 mb-4">Мої колоди</h2>
                    <div id="userDecksList" class="columns is-multiline"></div>
                </div>
            </section>

            <!-- Deck Stats View -->
            <section id="deckStatsView" class="view is-hidden">
                <nav class="level is-mobile mb-4">
                    <div class="level-left">
                        <div class="level-item">
                            <div>
                                <h2 class="title is-4 mb-1" id="deckNameDisplay">Завантаження…</h2>
                                <p class="subtitle is-6 has-text-grey" id="deckSourceDisplay"></p>
                            </div>
                        </div>
                    </div>
                    <div class="level-right">
                        <div class="level-item">
                            <button id="backToDeckBtn" class="button is-light">← До колод</button>
                        </div>
                    </div>
                </nav>

                <div class="columns is-multiline mb-4" id="statsGrid">
                    <div class="column is-6-mobile is-3-tablet">
                        <div class="stat-box">
                            <p class="stat-number" id="totalCards">0</p>
                            <p class="stat-label">Всього</p>
                        </div>
                    </div>
                    <div class="column is-6-mobile is-3-tablet">
                        <div class="stat-box">
                            <p class="stat-number" id="dueCards">0</p>
                            <p class="stat-label">До повторення</p>
                        </div>
                    </div>
                    <div class="column is-6-mobile is-3-tablet">
                        <div class="stat-box">
                            <p class="stat-number" id="learnedCards">0</p>
                            <p class="stat-label">Вивчено</p>
                        </div>
                    </div>
                    <div class="column is-6-mobile is-3-tablet">
                        <div class="stat-box">
                            <p class="stat-number" id="newCards">0</p>
                            <p class="stat-label">Нові</p>
                        </div>
                    </div>
                </div>

                <div class="buttons">
                    <button id="startStudyBtn" class="button is-primary">Почати навчання</button>
                    <button id="viewCardsBtn" class="button is-info is-light">Перегляд карток</button>
                    <button id="printPdfBtn" class="button is-light">Експорт у PDF</button>
                    <button id="resetDeckBtn" class="button is-warning is-light">Скинути прогрес</button>
                    <button id="deleteDeckBtn" class="button is-danger">Видалити колоду</button>
                </div>
            </section>

            <!-- Study View -->
            <section id="studyView" class="view is-hidden">
                <nav class="level is-mobile mb-4">
                    <div class="level-left">
                        <div class="level-item">
                            <div>
                                <div class="is-flex is-align-items-center" style="gap: 0.5rem;">
                                    <h2 class="title is-4 mb-0" id="studyDeckName">Завантаження…</h2>
                                    <span id="modeBadge" class="tag is-primary">Навчання</span>
                                </div>
                                <p class="subtitle is-6 has-text-grey mt-1" id="modeHint">Натисніть на картку або
                                    кнопку, щоб побачити відповідь.</p>
                            </div>
                        </div>
                    </div>
                    <div class="level-right">
                        <div class="level-item">
                            <div class="tags">
                                <span class="tag is-light" id="cardCounter">0 / 0</span>
                                <span class="tag is-light" id="sessionStats"></span>
                            </div>
                        </div>
                    </div>
                </nav>

                <div class="card-container">
                    <button class="flashcard" id="flashcard" type="button"
                        aria-label="Флеш-картка (натисніть щоб перевернути)">
                        <div class="flashcard-inner">
                            <div class="flashcard-face flashcard-front">
                                <div class="flashcard-content" id="cardQuestion"></div>
                                <div class="flashcard-footer-hint">Торкніться / натисніть, щоб перевернути</div>
                            </div>
                            <div class="flashcard-face flashcard-back">
                                <div class="flashcard-content" id="cardAnswer"></div>
                                <div class="flashcard-footer-hint">Оцініть себе (0–5) або перейдіть далі</div>
                            </div>
                        </div>
                    </button>
                </div>

                <div class="buttons is-centered" id="studyActions">
                    <button id="revealBtn" class="button is-primary is-medium">Показати відповідь</button>
                    <button id="againBtn" class="button is-danger is-light is-hidden">Знову (0)</button>
                    <button id="hardBtn" class="button is-warning is-light is-hidden">Складно (1)</button>
                    <button id="goodBtn" class="button is-success is-hidden">Добре (3)</button>
                    <button id="easyBtn" class="button is-success is-light is-hidden">Легко (5)</button>
                </div>

                <div class="buttons is-centered is-hidden" id="viewerActions">
                    <button id="prevBtn" class="button is-light">← Попередня</button>
                    <button id="nextBtn" class="button is-light">Наступна →</button>
                    <button id="shuffleBtn" class="button is-info is-light">Перемішати</button>
                </div>

                <div class="has-text-centered mt-4">
                    <button id="quitStudyBtn" class="button is-ghost">← Назад</button>
                </div>
            </section>
        </div>
    </main>

    <script src="app.js"></script>
</body>

</html>